# Ozon Seller Bot

Telegram –±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–∂–∞–º–∏, –≤—ã–∫—É–ø–∞–º–∏ –∏ –æ—Ç–≥—Ä—É–∑–∫–∞–º–∏ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ Ozon.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìà –ü—Ä–æ–¥–∞–∂–∏
- **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ:** MA7/14/30/60/90/180/360 + —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (ES)
- **–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:** –ø—Ä–æ–¥–∞–∂–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥ (1, 7, 14, 30 –¥–Ω–µ–π)
- **–¶–µ–ª–∏ –ø—Ä–æ–¥–∞–∂:** —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–ª–µ–π –ø–æ SKU, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–ú–µ—Ç—Ä–∏–∫–∏:** —é–Ω–∏—Ç—ã, –≤—ã—Ä—É—á–∫–∞, —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫, –∫–æ–Ω–≤–µ—Ä—Å–∏—è, CTR
- **–û—Ç—á—ë—Ç—ã:** –æ—Ç—á—ë—Ç –ø–æ SKU –∑–∞ –ø–µ—Ä–∏–æ–¥ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º –≤—ã–±–æ—Ä–∞ –¥–∞—Ç

### üè∑Ô∏è –í—ã–∫—É–ø—ã
- **–ó–∞–≥—Ä—É–∑–∫–∞ Excel:** —à–∞–±–ª–æ–Ω ¬´–¢–æ–≤–∞—Ä—ã.xlsx¬ª —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞–º–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:** —á—Ç–æ –∑–∞–∫—É–ø–∏—Ç—å —Å —É—á—ë—Ç–æ–º –ø–ª–∞–Ω–∞ –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –≤—ã–∫—É–ø–∞
- **–°—Ç–∞—Ç—É—Å:** –∑–∞–∫–∞–∑—ã –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ, –≤ –¥–æ—Å—Ç–∞–≤–∫–µ
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:** –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫–ª–∞–¥–æ–≤ –ø–æ –≥–æ—Ä–æ–¥–∞–º (–ú–æ—Å–∫–≤–∞/–•–∞–±–∞—Ä–æ–≤—Å–∫)
- **–°–≤–µ—Ç–æ—Ñ–æ—Ä:** –≤–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –¥–µ—Ñ–∏—Ü–∏—Ç–∞/–ø—Ä–æ—Ñ–∏—Ü–∏—Ç–∞/–Ω–æ—Ä–º—ã

### üöö –û—Ç–≥—Ä—É–∑–∫–∏
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:** —á—Ç–æ –æ—Ç–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Å–∫–ª–∞–¥—ã (Plan-First –º–µ—Ç–æ–¥–∏–∫–∞)
- **–°—Ç–∞—Ç—É—Å:** –æ—Å—Ç–∞—Ç–∫–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º –∏ –∫–ª–∞—Å—Ç–µ—Ä–∞–º
- **–ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å:** —Ä–∞—Å—á—ë—Ç —Å–ø—Ä–æ—Å–∞ –ø–æ —Å–∫–ª–∞–¥–∞–º (3 –º–µ—Ç–æ–¥–∏–∫–∏)
- **–°—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏:** L/S (lead time, —Å—Ä–æ–∫ –¥–æ –æ—Ç–≥—Ä—É–∑–∫–∏)
- **–≠–∫—Å–ø–æ—Ä—Ç:** Excel —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –ö–ª–∞—Å—Ç–µ—Ä‚Üí–°–∫–ª–∞–¥‚ÜíSKU

### üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–î–∞–π–¥–∂–µ—Å—Ç—ã:** –ø–æ–ª–Ω—ã–π –∏ —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —É—Ç—Ä–µ–Ω–Ω–∏–π
- **–ü–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:** —Ñ–∞–∫—Ç/–ø–ª–∞–Ω/–∫–æ–Ω–≤–µ—Ä—Å–∏—è/CTR/–∑–∞–∫—É–ø–∫–∏/–æ—Ç–≥—Ä—É–∑–∫–∏
- **–¶–µ–ª–∏ –ø—Ä–æ–¥–∞–∂:** –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∑–∞–≥—Ä—É–∑–∫–µ Excel
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏, –ø–æ–ª—É—á–∞—Ç–µ–ª–∏, –ø–∞—É–∑–∞ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.11+
- pip

### –®–∞–≥–∏

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone <repository-url>
cd ozon-seller
```

2. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate  # Windows
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
pip install -r requirements.txt
```

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Ç–∞–∫–∂–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
```bash
pip install -r requirements.txt
pip install pre-commit
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**
```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª:
- –£–∫–∞–∂–∏—Ç–µ `TELEGRAM_TOKEN` (–ø–æ–ª—É—á–∏—Ç–µ —É [@BotFather](https://t.me/BotFather))
- –£–∫–∞–∂–∏—Ç–µ `OZON_CLIENT_ID`, `OZON_API_KEY` –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–¥–∞–≤—Ü–∞ Ozon
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `WATCH_SKU` (—Å–ø–∏—Å–æ–∫ SKU –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è)
- –£–∫–∞–∂–∏—Ç–µ `CHAT_IDS` –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**
```bash
python -m ozon-seller.main

# –ò–ª–∏ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
python ozon-seller/main.py
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### .env —Ñ–∞–π–ª
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```env
# Telegram
TELEGRAM_TOKEN=your_bot_token_here

# –ü–æ–ª—É—á–∞—Ç–µ–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (ID —á–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
# –õ–∏—á–Ω—ã–π —á–∞—Ç: 123456789
# –ì—Ä—É–ø–ø–∞/–∫–∞–Ω–∞–ª: -1001234567890
CHAT_IDS=123456789,-1001234567890

# Ozon API (–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–¥–∞–≤—Ü–∞ –Ω–∞ seller.ozon.ru)
OZON_CLIENT_ID=your_client_id_here
OZON_API_KEY=your_api_key_here
OZON_COMPANY_ID=your_company_id_here  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

# –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏ (SKU –∏–ª–∏ OFFER)
PRODUCTS_MODE=SKU

# –°–ø–∏—Å–æ–∫ SKU –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
# –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–ª–∏–∞—Å: sku:alias
WATCH_SKU=123456:–¢–µ–ª–µ—Ñ–æ–Ω,789012:–ß–µ—Ö–æ–ª,345678:–ó–∞—Ä—è–¥–∫–∞

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–≥–Ω–æ–∑–∞
ES_ALPHA=0.3
ALERT_PLAN_HORIZON_DAYS=30

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–∫—É–ø–æ–∫
BUY_COEF=5.0
PURCHASES_XLSX_NAME=–¢–æ–≤–∞—Ä—ã.xlsx
BUY_RED_FACTOR=4.0
BUY_YELLOW_FACTOR=4.25
BUY_MAX_FACTOR=5.0
PROF_YELLOW_FACTOR=5.25
PROF_RED_FACTOR=5.5
PURCHASES_NEED_LIGHTS_ENABLED=1

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–≥—Ä—É–∑–æ–∫
SHIP_SAFETY_COEF=2.0
SHIP_ROUND_STEP=2
SHIP_RED_FACTOR_SHIP=1.5
SHIP_YELLOW_FACTOR_SHIP=1.75
SHIP_GREEN_FACTOR_SHIP=2.0
SHIP_MAX_FACTOR_SHIP=2.0
PROF_SHIP_GREEN_FACTOR_SHIP=2.0
PROF_SHIP_YELLOW_FACTOR_SHIP=2.25
PROF_SHIP_RED_FACTOR_SHIP=2.5
SHIPMENTS_NEED_LIGHTS_ENABLED=1

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ü–µ–ª–µ–π –ø—Ä–æ–¥–∞–∂
GOAL_RED_FACTOR_HIGH=1.20
GOAL_YELLOW_FACTOR_HIGH=1.10
GOAL_GREEN_TOL=0.02
GOAL_YELLOW_FACTOR_LOW=0.95
GOAL_RED_FACTOR_LOW=0.90
GOAL_LIGHTS_ENABLED=1

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
DAILY_NOTICES_WEEKDAY_AT=08:45
DAILY_NOTICES_WEEKEND_AT=10:00
DAILY_NOTICES_WEEKDAY_PM_AT=17:45
DAILY_NOTICES_WEEKEND_PM_AT=17:45
FULL_DIGEST_WEEKDAY_AT=10:00
NOTIFY_SPREAD_SEC=8
NOTICES_PREFER_LOCAL=1

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ü–µ–ª–∏ –ø—Ä–æ–¥–∞–∂ –≤ —Ä–∞—Å—á—ë—Ç–∞—Ö
OPERATIONS_USE_SALES_GOAL=1

# UI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
CB_DEDUP_WINDOW_MS=800

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
TZ=Europe/Moscow

# –ì–æ—Ä–æ–¥–∞ –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
CITY1=–ú–æ—Å–∫–≤–∞
CITY2=–•–∞–±–∞—Ä–æ–≤—Å–∫
CITY_COUNT=2
```

### API Integration

#### –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π Ozon

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://seller-edu.ozon.ru/
2. –ó–∞–π–¥–∏—Ç–µ –≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API –∫–ª—é—á–∏
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client ID –∏ API Key –≤ `.env`

#### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- **Analytics:** `/v1/analytics/data` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–¥–∞–∂–∞—Ö
- **FBO:** –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö –∏ —Å–∫–ª–∞–¥–∞—Ö (–≤ –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö)

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∫ API
```python
payload = {
    "date_from": "2024-01-01",
    "date_to": "2024-01-31",
    "metrics": ["ordered_units", "revenue"],
    "dimension": ["day", "sku"],
    "filters": [
        {"key": "sku", "value": "123456,789012", "operator": "IN"}
    ],
    "limit": 1000,
    "offset": 0,
}
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `/help` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º |
| `/units` | –°–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —é–Ω–∏—Ç–æ–≤ |
| `/method` | –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ —Ä–∞—Å—á—ë—Ç–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø—Ä–æ–¥–∞–∂ |
| `/warehouse` | –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ —Ä–∞—Å—á—ë—Ç–∞ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º |
| `/data` | –ó–∞–≥—Ä—É–∑–∏—Ç—å ¬´–¢–æ–≤–∞—Ä—ã.xlsx¬ª |
| `/notice` | –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

### config/
- `settings.py` ‚Äî Pydantic Settings —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- `constants.py` ‚Äî Enum –¥–ª—è –º–µ—Ç–æ–¥–æ–≤, —Å—Ç–∞—Ç—É—Å–æ–≤, –∫–æ–¥–æ–≤
- `env_helpers.py` ‚Äî Helper —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è .env

### modules_sales/
- `sales_facts_store.py` ‚Äî –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–∫—Ç–æ–≤ –ø—Ä–æ–¥–∞–∂
- `sales_forecast.py` ‚Äî –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ (MA/ES)
- `sales_goal.py` ‚Äî –¶–µ–ª–∏ –ø—Ä–æ–¥–∞–∂
- `sales_report.py` ‚Äî –û—Ç—á—ë—Ç—ã –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º
- `sales_buyout.py` ‚Äî –í—ã–∫—É–ø—ã (–≤ —Ä–∞–∑–¥–µ–ª–µ –ü—Ä–æ–¥–∞–∂–∏)

### modules_purchases/
- `purchases_need.py` ‚Äî –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞–∫—É–ø–∫–∞–º
- `purchases_report_data.py` ‚Äî –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤
- `purchases_need_data.py` ‚Äî –î–∞–Ω–Ω—ã–µ –æ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è—Ö

### modules_shipments/
- `shipments_need.py` ‚Äî –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—Ç–≥—Ä—É–∑–∫–∞–º
- `shipments_demand.py` ‚Äî –ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –ø–æ —Å–∫–ª–∞–¥–∞–º
- `shipments_leadtime*.py` ‚Äî –°—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- `shipments_report_data.py` ‚Äî –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤

### modules_common/
- `paths.py` ‚Äî –ü—É—Ç–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
- `calendar.py` ‚Äî –ö–∞–ª–µ–Ω–¥–∞—Ä—å
- `units.py` ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —é–Ω–∏—Ç–∞–º–∏

### handlers/
- `handlers_sales.py` ‚Äî –ü—Ä–æ–¥–∞–∂–∏
- `handlers_purchases.py` ‚Äî –í—ã–∫—É–ø—ã
- `handlers_shipments_*.py` ‚Äî –û—Ç–≥—Ä—É–∑–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
- `bot.py` ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –±–æ—Ç–∞
- `main.py` ‚Äî –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- `scheduler.py` ‚Äî –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `menu.py` ‚Äî Inline-–º–µ–Ω—é –±–æ—Ç–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –§–∞–∫—Ç—ã –ø—Ä–æ–¥–∞–∂
```python
{
    "sku": int,
    "date": date,
    "units": float,
    "revenue": float,
}
```

### –ü—Ä–æ–≥–Ω–æ–∑
```python
{
    "sku": int,
    "units_forecast": float,
    "revenue_forecast": float,
    "method": str,  # "ma30", "es", etc.
    "period_days": int,
}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∑–∞–∫—É–ø–æ–∫
```python
{
    "sku": int,
    "alias": str,
    "seller_total": float,
    "ozon_total": float,
    "plan_30d": float,
    "need_qty": float,
    "status": str,  # "DEFICIT" | "ENOUGH" | "SURPLUS"
    "action": str,  # "BUY" | "SELL" | "MAINTAIN"
}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç–≥—Ä—É–∑–æ–∫
```python
{
    "sku": int,
    "alias": str,
    "title": str,  # —Ç–æ–≤–∞—Ä –∏–ª–∏ —Å–∫–ª–∞–¥
    "dest": str,  # "sku" | "cluster" | "warehouse"
    "plan30": float,
    "stock": float,
    "qty": int,
    "status": str,  # "DEFICIT" | "ENOUGH" | "SURPLUS"
    "action": str,  # "üöö –û—Ç–≥—Ä—É–∑–∏—Ç—å" | "üîÑ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å" | "üè∑ –†–∞—Å–ø—Ä–æ–¥–∞—Ç—å"
}
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pre-commit hooks
```bash
pre-commit install
```

### –ó–∞–ø—É—Å–∫
```bash
# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python -m ozon-seller.main

# –ò–ª–∏ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
python ozon-seller/main.py
```

### –ö–æ–¥-—Å—Ç–∞–π–ª
```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
black ozon-seller/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è
ruff check ozon-seller/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
mypy ozon-seller/
```

–í—Å–µ —Ç—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
```bash
black ozon-seller/ && ruff check ozon-seller/ && mypy ozon-seller/
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```python
from config_package import settings, get_settings
from config_package.constants import ForecastMethod, DemandMethod

# –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
token = settings.effective_token
chat_ids = settings.parsed_chat_ids
sku_list = settings.parsed_watch_sku

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
method = settings.get_forecast_method()  # ForecastMethod.MA30
print(method.title)  # "–°—Ä–µ–¥–Ω—è—è –∑–∞ 30 –¥–Ω–µ–π"
```

## –¢–∏–ø–∏–∑–∞—Ü–∏—è

### TypedDict
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `typed_dicts.py` –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö:

```python
from typed_dicts import ForecastResult, PurchaseRecommendation

def process_series(series) -> ForecastResult:
    return {
        "sku": record.sku,
        "units_forecast": record.units,
        "revenue_forecast": record.revenue,
    }
```

### Type hints
–î–æ–±–∞–≤–ª—è–π—Ç–µ type hints –≤–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏:

```python
from typing import Dict, List, Optional
from datetime import date

def calculate_metrics(
    sku: int,
    period_days: int,
    horizon: int
) -> Tuple[float, float]:
    """
    –í—ã—á–∏—Å–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è SKU.
    
    Args:
        sku: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–∞
        period_days: –ü–µ—Ä–∏–æ–¥ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ (–¥–Ω–∏)
        horizon: –ì–æ—Ä–∏–∑–æ–Ω—Ç –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–Ω–∏)
    
    Returns:
        –ö–æ—Ä—Ç–µ–∂ (units_forecast, revenue_forecast)
    """
    units = 0.0
    revenue = 0.0
    # ...
    return units, revenue
```

## –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (Scheduler)

### –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–î–∞–π–¥–∂–µ—Å—Ç—ã:** –ü–æ–ª–Ω—ã–π –∏ —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —É—Ç—Ä–µ–Ω–Ω–∏–π
- **–ü–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:** –§–∞–∫—Ç/–ø–ª–∞–Ω, –∫–æ–Ω–≤–µ—Ä—Å–∏—è, CTR, –∑–∞–∫—É–ø–∫–∏, –æ—Ç–≥—Ä—É–∑–∫–∏
- **–¶–µ–ª–∏ –ø—Ä–æ–¥–∞–∂:** –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∑–∞–≥—Ä—É–∑–∫–µ Excel

### –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏
–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `.env`:
- `DAILY_NOTICES_WEEKDAY_AT` ‚Äî –±—É–¥–Ω–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 08:45)
- `DAILY_NOTICES_WEEKEND_AT` ‚Äî –≤—ã—Ö–æ–¥–Ω—ã–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10:00)
- `NOTIFY_SPREAD_SEC` ‚Äî –ø–∞—É–∑–∞ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8 —Å–µ–∫)

### –ü–æ–ª—É—á–∞—Ç–µ–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `.env` —á–µ—Ä–µ–∑ `CHAT_IDS`:
- –õ–∏—á–Ω—ã–π —á–∞—Ç: `123456789`
- –ì—Ä—É–ø–ø–∞/–∫–∞–Ω–∞–ª: `-1001234567890`

## –°–æ–≤–µ—Ç—Å—ã

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Enum –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫**
   - `ForecastMethod.MA30` –≤–º–µ—Å—Ç–æ `"ma30"`
   - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å + –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ

2. **–ò–∑–±–µ–≥–∞–π—Ç–µ `os.getenv` –Ω–∞–ø—Ä—è–º—É—é**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `settings` –∏–∑ `config_package`
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞

3. **–î–æ–±–∞–≤–ª—è–π—Ç–µ docstrings**
   - –§–æ—Ä–º–∞—Ç: Args, Returns, Raises
   - –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

4. **Graceful degradation**
   - –§–æ–ª–±—ç–∫–∏ –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥—É–ª–µ–π
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏

5. **–ò–∑–æ–ª—è—Ü–∏—è –º–æ–¥—É–ª–µ–π**
   - –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
   - –ú–∏–Ω–∏–º—É–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

## –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Pydantic documentation](https://docs.pydantic.dev/)
- [Aiogram 3.x docs](https://docs.aiogram.dev/)
- [Python typing cheatsheet](https://mypy.readthedocs.io/en/stable/cheat_sheet_py311.html)
- [Black style guide](https://black.readthedocs.io/en/stable/the_black_code_style/)
- [Ruff rules](https://docs.astral.sh/ruff/rules/)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìß Email: support@example.com
- üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: —Å–º. —Ä–∞–∑–¥–µ–ª—ã ¬´–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞¬ª –∏ ¬´API Integration¬ª
- üêõ Issues: https://github.com/your-repo/issues

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
